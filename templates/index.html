<!DOCTYPE html>
<html>
<head>
    <title>房价预测系统</title>
</head>
<body>
    <h1>房价预测系统</h1>
    <form id="predict-form">
        <label>面积 (平方米):</label>
        <input type="number" id="area" required><br><br>

        <label>卧室数量:</label>
        <input type="number" id="bedrooms" required><br><br>

        <label>城市:</label>
        <select id="city" required>
            <option value="Beijing">北京</option>
            <option value="Shanghai">上海</option>
            <option value="Guangzhou">广州</option>
        </select><br><br>

        <button type="submit">预测房价</button>
    </form>

    <h2>预测结果：</h2>
    <p id="result"></p>

    <h2>历史房价走势</h2>
    <img id="price-trend-img" src="" alt="价格趋势图">

    <script>
        document.getElementById('predict-form').addEventListener('submit', async function(event) {
            event.preventDefault();
            const area = document.getElementById('area').value;
            const bedrooms = document.getElementById('bedrooms').value;
            const city = document.getElementById('city').value;

            const response = await fetch('/predict', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({area, bedrooms, city})
            });
            const data = await response.json();
            document.getElementById('result').textContent = `预计房价为：${data.predicted_price} 元`;
        });

        // 加载价格趋势图
        async function loadTrend() {
            const response = await fetch('/price_trend');
            const data = await response.json();
            document.getElementById('price-trend-img').src = data.plot_url;
        }
        loadTrend();
    </script>
</body>
</html>
